---
---
title: MsSQLConfigStore Integration
description: Comprehensive documentation for integrating MsSQLConfigStore with examples and troubleshooting tips.
---

import { DataSource } from 'typeorm';
import { MsSQLConfigStore } from '@configu-integrations/mssql';

# MsSQLConfigStore Integration

## Overview

`MsSQLConfigStore` provides a reliable way to manage configuration data stored in Microsoft SQL Server (MsSQL). This store enables applications to seamlessly retrieve, manage, and use configuration data stored within an MsSQL database.

---

## Motivation

- **Introduce users** to `ConfigStore` as a configuration management tool integrated with MsSQL.
- **Enhance usability** by providing practical examples for setting up and using the MsSQL configuration store.
- **Ensure completeness** of the integration package by covering all necessary details, including configuration, troubleshooting, and best practices.

---

## Prerequisites

Before proceeding, ensure the following requirements are met:

1. **MsSQL Server:** A running Microsoft SQL Server instance.
2. **Connection Credentials:** Username, password, host address, and database name.
3. **Node.js & TypeScript:** Ensure Node.js is installed (`>= v14`) with TypeScript for best compatibility.
4. **TypeORM Library:** This package is based on TypeORM ORM for MsSQL integration.

**Helpful Resources:**
- [MsSQL Documentation](https://learn.microsoft.com/en-us/sql/sql-server)  
- [TypeORM MsSQL Data Source Options](https://typeorm.io/data-source-options#mssql-data-source-options)

---

## Installation

To use `MsSQLConfigStore`, install the necessary libraries:

```bash
npm install @configu/cli @configu/integrations @configu-integrations/mssql typeorm mssql

---

Configuration Options
The MsSQLConfigStore requires specific data source configuration, passed either through environment variables or directly as connection options.

bash:

MSSQL_HOST=localhost
MSSQL_PORT=1433
MSSQL_USERNAME=myUser
MSSQL_PASSWORD=myPassword
MSSQL_DATABASE=myDatabase
MSSQL_SCHEMA=dbo
MSSQL_CONNECTION_TIMEOUT=30000

TypeORM Data Source Configuration

const dataSource = new DataSource({
  type: 'mssql',
  host: process.env.MSSQL_HOST || 'localhost',
  port: Number(process.env.MSSQL_PORT) || 1433,
  username: process.env.MSSQL_USERNAME || 'myUser',
  password: process.env.MSSQL_PASSWORD || 'myPassword',
  database: process.env.MSSQL_DATABASE || 'myDatabase',
  options: {
    encrypt: false, // Disable encryption for local development
    enableArithAbort: true,
  },
});

Creating MsSQLConfigStore

Hereâ€™s how to initialize the MsSQLConfigStore:

const configStore = new MsSQLConfigStore({
  dataSource,
  tableName: 'Configurations', // Name of the table storing configs
});

// Connecting to the MsSQL store
dataSource.initialize().then(async () => {
  console.log('MsSQL Data Source has been initialized.');
});



Usage Examples

Storing Configuration Data:
await configStore.set('apiUrl', 'https://example.com/api');
await configStore.set('dbMaxConnections', '10');

Retrieving Configuration Data:
const apiUrl = await configStore.get('apiUrl');
console.log('API URL:', apiUrl); // Output: https://example.com/api

Retrieve multiple keys:
const config = await configStore.getMany(['apiUrl', 'dbMaxConnections']);
console.log(config); // Output: { apiUrl: 'https://example.com/api', dbMaxConnections: '10' }

Deleting Configuration Data
await configStore.delete('apiUrl');
console.log('API URL configuration removed.');

Schema and Table Structure
Ensure that the Configurations table exists with the following schema:
CREATE TABLE Configurations (
    key NVARCHAR(255) PRIMARY KEY,
    value NVARCHAR(MAX) NOT NULL
);


Example Use Case: Centralized Configuration Management
Using the MsSQLConfigStore integration, you can manage application configurations such as:

API endpoints
Database limits and connections
Authentication keys
Feature flags
This setup ensures that configurations are easily retrievable from a central MsSQL database, providing consistency across deployments.

Error Handling and Troubleshooting
Connection Timeout:
Ensure the MsSQL server is accessible and the connection options (host, port) are correct.

Table Not Found:
Verify the table name matches the configured value. If needed, create the table with the schema provided.

Incorrect Credentials:
Double-check your MsSQL username and password.

SSL/TLS Encryption Errors:
Use encrypt: false in the options if connecting locally without encryption.

Testing and Validation
Use this script to validate your integration:

ts
Copy code
(async () => {
  await configStore.set('testKey', 'testValue');
  const value = await configStore.get('testKey');
  console.log('Retrieved:', value);

  await configStore.delete('testKey');
  const deletedValue = await configStore.get('testKey');
  console.log('After Deletion:', deletedValue); // Should print null or undefined
})();
Contribution Guidelines
If you find issues or want to contribute improvements, feel free to open a pull request at the official repository.

Refer to this example PR:
Add docs for @configu-integrations/aws-secrets-manager #575

Conclusion
The MsSQLConfigStore integration provides a seamless way to manage application configuration within an MsSQL database. By following the examples and troubleshooting tips above, you can efficiently integrate, use, and maintain the MsSQLConfigStore in your projects.

References
MsSQL Documentation
TypeORM MsSQL Data Source Options
AWS Secrets Manager Example PR


---

### **Explanation of MDX Changes**

1. **Frontmatter (`---`)**: Added a `title` and `description` section to align with MDX conventions used in documentation websites.
2. **JSX Imports**: Included `DataSource` and `MsSQLConfigStore` imports at the top to match how MDX embeds code components.
3. **Consistent Code Blocks**: Used triple backticks with appropriate language tags (like `ts` for TypeScript and `sql` for SQL).
4. **Links and Formatting**: Kept inline links and headers intact, ensuring readability.

This version is now ready for use in MDX-based documentation systems like Docusaurus or Storybook.


---

import { Construction } from '/snippets/callouts.mdx';

<Construction />
