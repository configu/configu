# reference: https://www.gitpod.io/docs/references/gitpod-yml
# image: https://www.gitpod.io/docs/configure/workspaces/workspace-image
tasks:
  - name: repo
    init: |
      nvm install
      npm install
      gp sync-done repo
  - name: ts
    init: |
      gp sync-await repo
      cd ts
      nvm use
      npm install
      npm run build
    openMode: tab-after
  - name: py
    init: |
      gp sync-await repo
      cd py
      pyenv install --force
      pyenv local 3.9.16
      poetry env use $(pyenv which python)
      poetry install
      poetry build
    openMode: tab-after
  - name: go
    init: |
      gp sync-await repo
      cd go
      go install
    openMode: tab-after
ports:
  # todo: uncomment when docs are migrated from configu.com/docs to this repo
  # - name: Docs
  #   port: 3000
  #   onOpen: open-preview
  - name: React Example
    port: 8080-8100
github:
  prebuilds:
    master: true
    branches: false
    pullRequests: false
    pullRequestsFromForks: false
